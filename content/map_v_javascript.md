+++
date = '2024-11-23T18:53:24+03:00'
title = 'Map в JavaScript'
categories = [ "javascript" ]
+++

<p>Task в RS School по JavaScript про Map</p>
            <p>
              Для работы со сложными структурами данных, такими как массивы и объкты, принято
              использовать Map и Set
            </p>
            <p>
              Map — это коллекция, предназначенная для хранения данных любого типа в виде пар [ключ,
              значение].
            </p>
            <p>
              Каждое значение сохраняется по уникальному ключу, который затем используется для
              доступа к этому значению. При этом ключи также могут быть любого типа.
            </p>
            <p>Методы и свойства Map</p>
            <ul>
              <li>
                <p>new Map() &rsaquo; создаёт коллекцию</p>
              </li>
              <li>
                <p>map.set(key, value) &rsaquo; записывает по ключу "key" значение "value"</p>
              </li>
              <li>
                <p>
                  map.get(key) &rsaquo; возвращает значение по ключу или "undefined", если ключ
                  "key" отсутствует.
                </p>
              </li>
              <li>
                <p>
                  map.has(key) &rsaquo; озвращает "true", если ключ "key" присутствует в коллекции,
                  иначе "false".
                </p>
              </li>
              <li>
                <p>
                  map.delete(key) &rsaquo; удаляет элемент (пару [ключ/значение]) по ключу "key"
                </p>
              </li>
              <li>
                <p>map.clear() &rsaquo; очищает коллекцию от всех элементов.</p>
              </li>
              <li>
                <p>map.size &rsaquo; возвращает текущее количество элементов.</p>
              </li>
            </ul>
            <p>Пример использования</p>
            <pre>
<code>let map = new Map();
map.set("1", "string1");    // строка в качестве ключа
map.set(1, "number1");      // цифра как ключ
map.set(true, "boolean1");  // булево значение как ключ
// помните, обычный объект Object приводит ключи к строкам?
// Map сохраняет тип ключей, так что в этом случае сохранится 2 разных значения:      
console.log(map.get(1)); // "number1"
console.log(map.get("1")); // "string1"
console.log(map.size); // 3</code></pre>
            <p>
              Как мы видим, в отличие от объектов, ключи в "Map" не приводятся к строкам. Это
              позволяет использовать любые типы данных в качестве ключей.
            </p>
            <p class="gray">
              Использование map[key] не является корректным способом работы с Map. Хотя map[key]
              может работать, например, мы можем установить map[key] = 2, в этом случае map будет
              рассматриваться как обычный JavaScript-объект, что приводит к всем соответствующим
              ограничениям (например, ключи будут приводиться к строкам и т.д.).
            </p>
            <p class="gray">
              Поэтому для работы с Map следует использовать специальные методы, такие как set, get и
              другие.
            </p>
            <p>Map может использовать объекты в качестве ключей.</p>
            <pre>
<code>let john = { name: "John" };
// давайте сохраним количество посещений для каждого пользователя     
let visitsCountMap = new Map();
// объект john - это ключ для значения в объекте Map
visitsCountMap.set(john, 123);
console.log(visitsCountMap.get(john)); // 123</code></pre>
            <p>
              Использование объектов в качестве ключей — одна из наиболее заметных и важных функций
              Map. Это невозможно сделать с помощью обычных объектов. В объектах ключи могут быть
              только строками или символами, но мы не можем использовать другой объект в качестве
              ключа.
            </p>
            <p>Пример использования объекта в качестве ключа</p>
            <pre><code>let john = { name: "John" };
let ben = { name: "Ben" };
let visitsCountObj = {}; // попробуем использовать объект
visitsCountObj[ben] = 234; // пробуем использовать объект ben в качестве ключа
visitsCountObj[john] = 123; // пробуем использовать объект john в качестве ключа, при этом объект ben будет замещён
// Вот что там было записано!
console.log( visitsCountObj["[object Object]"] ); // 123</code></pre>
            <p>
              Поскольку visitsCountObj является объектом, он преобразует все ключи типа Object,
              такие как john и ben, в одну и ту же строку "[object Object]". Это, очевидно, не то,
              чего мы хотим.
            </p>